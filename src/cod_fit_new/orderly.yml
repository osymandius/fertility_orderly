script: cod_fit_new.R

artefacts:
  - data:
      description: sd report
      filenames:
        - sd_report.csv
  # - data:
  #     description: tips
  #     filenames:
  #       - tips.csv
  - data:
      description: fertility indicator dataset
      filenames:
        - fr.csv
  - data:
      description: hyperparameters and random effect samples
      filenames:
        - hyper.rds
  - staticgraph:
      description: Validate admin-1 TFRs
      filenames:
        - check/tfr_admin1.pdf
        - check/tfr_district.pdf


global_resources:
  resources/iso_mapping_fit.csv: iso_mapping_fit.csv
  resources/mics_asfr.csv: mics_asfr.csv

resources:
  # - parallel.cpp
  # - parallel.o
  # - parallel.so
  - tmb_all_level_poisson.cpp
  - tmb_all_level_poisson.o
  - tmb_all_level_poisson.so
  - interpolated_population.csv


displayname: Fertility model fit

packages:
  - dplyr
  - tidyr
  - dfertility
  - ggplot2
  - naomi
  - readr
  - sf
  - stringr
  - TMB
  - Matrix
  - parallel
  - purrr
  - rlang
  - mgcv



depends:
  cod_data_areas:
    id: latest
    use:
      depends/naomi_areas.geojson: cod_areas.geojson
  cod_asfr:
    id: latest
    use:
      depends/fertility_asfr.csv: cod_asfr.csv
      depends/fertility_fr_plot.csv: cod_fr_plot.csv
